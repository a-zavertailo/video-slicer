"use strict";angular.module("com.2fdevs.videogular",["ngSanitize"]).run(["$templateCache",function(e){e.put("vg-templates/vg-media-video","<video></video>"),e.put("vg-templates/vg-media-audio","<audio></audio>"),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o})}]),angular.module("com.2fdevs.videogular").constant("VG_STATES",{PLAY:"play",PAUSE:"pause",STOP:"stop"}).constant("VG_VOLUME_KEY","videogularVolume"),angular.module("com.2fdevs.videogular").controller("vgController",["$scope","$timeout","$window","vgConfigLoader","vgFullscreen","VG_UTILS","VG_STATES","VG_VOLUME_KEY",function(e,t,n,i,o,a,r,u){var s=null,l=!1,c=!1,d=!1,m=!1;this.videogularElement=null,this.clearMedia=function(){this.mediaElement[0].src="",this.mediaElement[0].removeEventListener("canplay",this.onCanPlay.bind(this),!1),this.mediaElement[0].removeEventListener("loadedmetadata",this.onLoadMetaData.bind(this),!1),this.mediaElement[0].removeEventListener("waiting",this.onStartBuffering.bind(this),!1),this.mediaElement[0].removeEventListener("ended",this.onComplete.bind(this),!1),this.mediaElement[0].removeEventListener("playing",this.onStartPlaying.bind(this),!1),this.mediaElement[0].removeEventListener("play",this.onPlay.bind(this),!1),this.mediaElement[0].removeEventListener("pause",this.onPause.bind(this),!1),this.mediaElement[0].removeEventListener("volumechange",this.onVolumeChange.bind(this),!1),this.mediaElement[0].removeEventListener("playbackchange",this.onPlaybackChange.bind(this),!1),this.mediaElement[0].removeEventListener("timeupdate",this.onUpdateTime.bind(this),!1),this.mediaElement[0].removeEventListener("progress",this.onProgress.bind(this),!1),this.mediaElement[0].removeEventListener("seeking",this.onSeeking.bind(this),!1),this.mediaElement[0].removeEventListener("seeked",this.onSeeked.bind(this),!1),this.mediaElement[0].removeEventListener("error",this.onVideoError.bind(this),!1)},this.onRouteChange=function(){void 0!==this.clearMediaOnNavigate&&this.clearMediaOnNavigate!==!0||this.clearMedia()},this.onCanPlay=function(t){this.isBuffering=!1,e.$parent.$digest(e.vgCanPlay({$event:t})),!d&&(this.startTime>0||0===this.startTime)&&(this.seekTime(this.startTime),d=!0)},this.onVideoReady=function(){this.isReady=!0,this.autoPlay=e.vgAutoPlay,this.playsInline=e.vgPlaysInline,this.nativeFullscreen=e.vgNativeFullscreen||!0,this.cuePoints=e.vgCuePoints,this.startTime=e.vgStartTime,this.virtualClipDuration=e.vgVirtualClipDuration,this.clearMediaOnNavigate=e.vgClearMediaOnNavigate||!0,this.currentState=r.STOP,c=!0,m=this.startTime>=0&&this.virtualClipDuration>0,a.supportsLocalStorage()&&this.setVolume(parseFloat(n.localStorage.getItem(u)||"1")),e.vgConfig?i.loadConfig(e.vgConfig).then(this.onLoadConfig.bind(this)):e.vgPlayerReady({$API:this})},this.onLoadConfig=function(t){this.config=t,e.vgTheme=this.config.theme,e.vgAutoPlay=this.config.autoPlay,e.vgPlaysInline=this.config.playsInline,e.vgNativeFullscreen=this.config.nativeFullscreen,e.vgCuePoints=this.config.cuePoints,e.vgClearMediaOnNavigate=this.config.clearMediaOnNavigate,e.vgStartTime=this.config.startTime,e.vgVirtualClipDuration=this.config.virtualClipDuration,m=e.vgStartTime>=0&&e.vgVirtualClipDuration>0,e.vgPlayerReady({$API:this})},this.onLoadMetaData=function(e){this.isBuffering=!1,this.onUpdateTime(e)},this.onProgress=function(t){this.updateBuffer(t),e.$parent.$digest()},this.updateBuffer=function(e){e.target.buffered.length&&(this.buffered=e.target.buffered,this.bufferEnd=1e3*e.target.buffered.end(e.target.buffered.length-1),this.bufferEnd>this.totalTime&&(this.bufferEnd=this.totalTime))},this.onUpdateTime=function(n){var i=1e3*n.target.currentTime;this.updateBuffer(n),n.target.duration!=1/0&&null!=n.target.duration&&void 0!=n.target.duration&&1.7976931348623157e308!=n.target.duration?(m?d&&(n.target.currentTime<this.startTime||n.target.currentTime-this.startTime>this.virtualClipDuration)?this.onComplete():(this.currentTime=Math.max(0,i-1e3*this.startTime),this.totalTime=1e3*this.virtualClipDuration,this.timeLeft=1e3*this.virtualClipDuration-this.currentTime):(this.currentTime=i,this.totalTime=1e3*n.target.duration,this.timeLeft=1e3*(n.target.duration-n.target.currentTime)),this.isLive=!1):(this.currentTime=i,this.isLive=!0);var o=m?this.currentTime/1e3:n.target.currentTime,a=m?this.totalTime/1e3:n.target.duration;this.cuePoints&&this.checkCuePoints(o),e.vgUpdateTime({$currentTime:o,$duration:a}),"$apply"!=e.$$phase&&"$digest"!=e.$$phase&&t(function(){e.$parent.$digest()})},this.checkCuePoints=function(e){for(var t in this.cuePoints)for(var n=0,i=this.cuePoints[t].length;n<i;n++){var o=this.cuePoints[t][n],a=parseInt(e,10),r=parseInt(o.timeLapse.start,10);o.timeLapse.end||(o.timeLapse.end=o.timeLapse.start+1),e<o.timeLapse.end&&(o.$$isCompleted=!1),o.$$isDirty||a!==r||"function"!=typeof o.onEnter||(o.onEnter(e,o.timeLapse,o.params),o.$$isDirty=!0),e>o.timeLapse.start?(e<o.timeLapse.end&&(o.onUpdate&&o.onUpdate(e,o.timeLapse,o.params),o.$$isDirty||"function"!=typeof o.onEnter||o.onEnter(e,o.timeLapse,o.params)),e>=o.timeLapse.end&&o.onComplete&&!o.$$isCompleted&&(o.$$isCompleted=!0,o.onComplete(e,o.timeLapse,o.params)),o.$$isDirty=!0):(o.onLeave&&o.$$isDirty&&o.onLeave(e,o.timeLapse,o.params),o.$$isDirty=!1)}},this.onPlay=function(){this.setState(r.PLAY),e.$parent.$digest()},this.onPause=function(){var t=m?this.currentTime:this.mediaElement[0].currentTime;0==t?this.setState(r.STOP):this.setState(r.PAUSE),e.$parent.$digest()},this.onVolumeChange=function(){this.volume=this.mediaElement[0].volume,e.$parent.$digest()},this.onPlaybackChange=function(){this.playback=this.mediaElement[0].playbackRate,e.$parent.$digest()},this.onSeeking=function(t){e.vgSeeking({$currentTime:t.target.currentTime,$duration:t.target.duration})},this.onSeeked=function(t){e.vgSeeked({$currentTime:t.target.currentTime,$duration:t.target.duration})},this.seekTime=function(e,t){var n;if(t)m?(e=Math.max(0,Math.min(e,100)),n=e*this.virtualClipDuration/100,this.mediaElement[0].currentTime=this.startTime+n):(n=e*this.mediaElement[0].duration/100,this.mediaElement[0].currentTime=n);else if(m){var i=e/this.mediaElement[0].duration;n=d?this.virtualClipDuration*i:0,this.mediaElement[0].currentTime=d?this.startTime+n:this.startTime}else n=e,this.mediaElement[0].currentTime=n;this.currentTime=1e3*n},this.playPause=function(){this.mediaElement[0].paused?this.play():this.pause()},this.setState=function(t){return t&&t!=this.currentState&&(e.vgUpdateState({$state:t}),this.currentState=t),this.currentState},this.play=function(){this.mediaElement[0].play(),this.setState(r.PLAY)},this.pause=function(){this.mediaElement[0].pause(),this.setState(r.PAUSE)},this.stop=function(){try{this.mediaElement[0].pause();var e=m?this.startTime:0;this.mediaElement[0].currentTime=e,this.currentTime=e,this.buffered=[],this.bufferEnd=0,this.setState(r.STOP)}catch(e){return e}},this.toggleFullScreen=function(){o.isAvailable&&this.nativeFullscreen?this.isFullScreen?a.isMobileDevice()||o.exit():a.isMobileDevice()?a.isiOSDevice()?c?this.enterElementInFullScreen(this.mediaElement[0]):(l=!0,this.play()):this.enterElementInFullScreen(this.mediaElement[0]):this.enterElementInFullScreen(this.videogularElement[0]):(this.isFullScreen?(this.videogularElement.removeClass("fullscreen"),this.videogularElement.css("z-index","auto")):(this.videogularElement.addClass("fullscreen"),this.videogularElement.css("z-index",a.getZIndex())),this.isFullScreen=!this.isFullScreen)},this.enterElementInFullScreen=function(e){o.request(e)},this.changeSource=function(t){e.vgChangeSource({$source:t})},this.setVolume=function(t){t=Math.max(Math.min(t,1),0),e.vgUpdateVolume({$volume:t}),this.mediaElement[0].volume=t,this.volume=t,a.supportsLocalStorage()&&n.localStorage.setItem(u,t.toString())},this.setPlayback=function(t){e.vgUpdatePlayback({$playBack:t}),this.mediaElement[0].playbackRate=t,this.playback=t},this.updateTheme=function(e){var t,n,i=document.getElementsByTagName("link");if(s)for(t=0,n=i.length;t<n;t++)if(i[t].outerHTML.indexOf(s)>=0){i[t].parentNode.removeChild(i[t]);break}if(e){var o=angular.element(document).find("head"),a=!1;for(t=0,n=i.length;t<n&&!(a=i[t].outerHTML.indexOf(e)>=0);t++);a||o.append("<link rel='stylesheet' href='"+e+"'>"),s=e}},this.onStartBuffering=function(t){this.isBuffering=!0,e.$parent.$digest()},this.onStartPlaying=function(t){this.isBuffering=!1,e.$parent.$digest()},this.onComplete=function(t){e.vgComplete(),this.setState(r.STOP),this.isCompleted=!0,m&&this.stop(),e.$parent.$digest()},this.onVideoError=function(t){e.vgError({$event:t})},this.addListeners=function(){this.mediaElement[0].addEventListener("canplay",this.onCanPlay.bind(this),!1),this.mediaElement[0].addEventListener("loadedmetadata",this.onLoadMetaData.bind(this),!1),this.mediaElement[0].addEventListener("waiting",this.onStartBuffering.bind(this),!1),this.mediaElement[0].addEventListener("ended",this.onComplete.bind(this),!1),this.mediaElement[0].addEventListener("playing",this.onStartPlaying.bind(this),!1),this.mediaElement[0].addEventListener("play",this.onPlay.bind(this),!1),this.mediaElement[0].addEventListener("pause",this.onPause.bind(this),!1),this.mediaElement[0].addEventListener("volumechange",this.onVolumeChange.bind(this),!1),this.mediaElement[0].addEventListener("playbackchange",this.onPlaybackChange.bind(this),!1),this.mediaElement[0].addEventListener("timeupdate",this.onUpdateTime.bind(this),!1),this.mediaElement[0].addEventListener("progress",this.onProgress.bind(this),!1),this.mediaElement[0].addEventListener("seeking",this.onSeeking.bind(this),!1),this.mediaElement[0].addEventListener("seeked",this.onSeeked.bind(this),!1),this.mediaElement[0].addEventListener("error",this.onVideoError.bind(this),!1)},this.init=function(){this.isReady=!1,this.isCompleted=!1,this.buffered=[],this.bufferEnd=0,this.currentTime=0,this.totalTime=0,this.timeLeft=0,this.isLive=!1,this.isFullScreen=!1,this.playback=1,this.isConfig=void 0!=e.vgConfig,this.mediaElement=[{play:function(){},pause:function(){},stop:function(){},addEventListener:function(){},removeEventListener:function(){}}],o.isAvailable&&(this.isFullScreen=o.isFullScreen()),this.updateTheme(e.vgTheme),this.addBindings(),o.isAvailable&&document.addEventListener(o.onchange,this.onFullScreenChange.bind(this))},this.onUpdateTheme=function(e){this.updateTheme(e)},this.onUpdateAutoPlay=function(e){e&&!this.autoPlay&&(this.autoPlay=e,this.play(this))},this.onUpdateStartTime=function(e){if(e&&e!=this.startTime){this.mediaElement[0].currentTime=e,this.startTime=e,m=this.startTime>=0&&this.virtualClipDuration>0;var t={target:this.mediaElement[0]};this.onUpdateTime(t,!0)}},this.onUpdateVirtualClipDuration=function(e){if(e&&e!=this.virtualClipDuration){this.virtualClipDuration=e,m=this.startTime>=0&&this.virtualClipDuration>0;var t={target:this.mediaElement[0]};this.onUpdateTime(t,!0)}},this.onUpdatePlaysInline=function(e){this.playsInline=e},this.onUpdateNativeFullscreen=function(e){void 0==e&&(e=!0),this.nativeFullscreen=e},this.onUpdateCuePoints=function(e){this.cuePoints=e,this.checkCuePoints(this.currentTime)},this.onUpdateClearMediaOnNavigate=function(e){this.clearMediaOnNavigate=e},this.addBindings=function(){e.$watch("vgTheme",this.onUpdateTheme.bind(this)),e.$watch("vgAutoPlay",this.onUpdateAutoPlay.bind(this)),e.$watch("vgStartTime",this.onUpdateStartTime.bind(this)),e.$watch("vgVirtualClipDuration",this.onUpdateVirtualClipDuration.bind(this)),e.$watch("vgPlaysInline",this.onUpdatePlaysInline.bind(this)),e.$watch("vgNativeFullscreen",this.onUpdateNativeFullscreen.bind(this)),e.$watch("vgCuePoints",this.onUpdateCuePoints.bind(this)),e.$watch("vgClearMediaOnNavigate",this.onUpdateClearMediaOnNavigate.bind(this))},this.onFullScreenChange=function(t){this.isFullScreen=o.isFullScreen(),e.$parent.$digest()},e.$on("$destroy",this.clearMedia.bind(this)),e.$on("$routeChangeStart",this.onRouteChange.bind(this)),this.init()}]),angular.module("com.2fdevs.videogular").directive("vgCrossorigin",[function(){return{restrict:"A",require:"^videogular",link:{pre:function(e,t,n,i){var o;e.setCrossorigin=function(e){e?i.mediaElement.attr("crossorigin",e):i.mediaElement.removeAttr("crossorigin")},i.isConfig?e.$watch(function(){return i.config},function(){i.config&&e.setCrossorigin(i.config.crossorigin)}):e.$watch(n.vgCrossorigin,function(t,n){o&&t==n||!t?e.setCrossorigin():(o=t,e.setCrossorigin(o))})}}}}]),angular.module("com.2fdevs.videogular").directive("vgLoop",[function(){return{restrict:"A",require:"^videogular",link:{pre:function(e,t,n,i){var o;e.setLoop=function(e){e?i.mediaElement.attr("loop",e):i.mediaElement.removeAttr("loop")},i.isConfig?e.$watch(function(){return i.config},function(){i.config&&e.setLoop(i.config.loop)}):e.$watch(n.vgLoop,function(t,n){o&&t==n||!t?e.setLoop():(o=t,e.setLoop(o))})}}}}]),angular.module("com.2fdevs.videogular").directive("vgMedia",["$timeout","VG_UTILS","VG_STATES",function(e,t,n){return{restrict:"E",require:"^videogular",templateUrl:function(e,t){var n=t.vgType||"video";return t.vgTemplate||"vg-templates/vg-media-"+n},scope:{vgSrc:"=?",vgType:"=?"},link:function(i,o,a,r){var u;a.vgType&&"video"!==a.vgType?a.vgType="audio":a.vgType="video",i.onChangeSource=function(e,t){u&&e==t||!e||(u=e,r.currentState!==n.PLAY&&(r.currentState=n.STOP),r.sources=u,i.changeSource())},i.changeSource=function(){if(angular.isArray(u)){var n="";if(r.mediaElement[0].canPlayType){for(var i=0,o=u.length;i<o;i++)if(n=r.mediaElement[0].canPlayType(u[i].type),"maybe"==n||"probably"==n){r.mediaElement.attr("src",u[i].src),r.mediaElement.attr("type",u[i].type),r.changeSource(u[i]);break}}else r.mediaElement.attr("src",u[0].src),r.mediaElement.attr("type",u[0].type),r.changeSource(u[0])}else r.mediaElement.attr("src",u),r.changeSource(u);t.isMobileDevice()&&r.mediaElement[0].load(),e(function(){!r.autoPlay||!t.isCordova()&&t.isMobileDevice()||r.play()}),""==n&&r.onVideoError()},r.mediaElement=o.find(a.vgType),r.sources=i.vgSrc,r.addListeners(),r.onVideoReady(),i.$watch("vgSrc",i.onChangeSource),i.$watch(function(){return r.sources},i.onChangeSource),i.$watch(function(){return r.playsInline},function(e,t){e?r.mediaElement.attr("webkit-playsinline",""):r.mediaElement.removeAttr("webkit-playsinline")}),r.isConfig&&i.$watch(function(){return r.config},function(){r.config&&(i.vgSrc=r.config.sources)})}}}]),angular.module("com.2fdevs.videogular").directive("vgNativeControls",[function(){return{restrict:"A",require:"^videogular",link:{pre:function(e,t,n,i){var o;e.setControls=function(e){e?i.mediaElement.attr("controls",e):i.mediaElement.removeAttr("controls")},i.isConfig?e.$watch(function(){return i.config},function(){i.config&&e.setControls(i.config.controls)}):e.$watch(n.vgNativeControls,function(t,n){o&&t==n||!t?e.setControls():(o=t,e.setControls(o))})}}}}]),angular.module("com.2fdevs.videogular").directive("vgPreload",[function(){return{restrict:"A",require:"^videogular",link:{pre:function(e,t,n,i){var o;e.setPreload=function(e){e?i.mediaElement.attr("preload",e):i.mediaElement.removeAttr("preload")},i.isConfig?e.$watch(function(){return i.config},function(){i.config&&e.setPreload(i.config.preload)}):e.$watch(n.vgPreload,function(t,n){o&&t==n||!t?e.setPreload():(o=t,e.setPreload(o))})}}}}]),angular.module("com.2fdevs.videogular").directive("vgTracks",[function(){return{restrict:"A",require:"^videogular",link:{pre:function(e,t,n,i){var o,a,r,u=!1;e.onLoadMetaData=function(){u=!0,e.updateTracks()},e.updateTracks=function(){var t=i.mediaElement.children();for(a=0,r=t.length;a<r;a++)t[a].remove&&t[a].remove();if(o)for(a=0,r=o.length;a<r;a++){var n=document.createElement("track");for(var u in o[a])n[u]=o[a][u];n.addEventListener("load",e.onLoadTrack.bind(e,n)),i.mediaElement[0].appendChild(n)}},e.onLoadTrack=function(t){t.default?t.mode="showing":t.mode="hidden";for(var n=0,o=i.mediaElement[0].textTracks.length;n<o;n++)t.label==i.mediaElement[0].textTracks[n].label&&(t.default?i.mediaElement[0].textTracks[n].mode="showing":i.mediaElement[0].textTracks[n].mode="disabled");t.removeEventListener("load",e.onLoadTrack.bind(e,t))},e.setTracks=function(t){o=t,i.tracks=t,u?e.updateTracks():i.mediaElement[0].addEventListener("loadedmetadata",e.onLoadMetaData.bind(e),!1)},i.isConfig?e.$watch(function(){return i.config},function(){i.config&&e.setTracks(i.config.tracks)}):e.$watch(n.vgTracks,function(t,n){o&&t==n||e.setTracks(t)},!0)}}}}]),angular.module("com.2fdevs.videogular").directive("videogular",[function(){return{restrict:"EA",scope:{vgTheme:"=?",vgAutoPlay:"=?",vgStartTime:"=?",vgVirtualClipDuration:"=?",vgPlaysInline:"=?",vgNativeFullscreen:"=?",vgClearMediaOnNavigate:"=?",vgCuePoints:"=?",vgConfig:"@",vgCanPlay:"&",vgComplete:"&",vgUpdateVolume:"&",vgUpdatePlayback:"&",vgUpdateTime:"&",vgUpdateState:"&",vgPlayerReady:"&",vgChangeSource:"&",vgSeeking:"&",vgSeeked:"&",vgError:"&"},controller:"vgController",controllerAs:"API",link:{pre:function(e,t,n,i){i.videogularElement=angular.element(t)}}}}]),angular.module("com.2fdevs.videogular").service("vgConfigLoader",["$http","$q","$sce",function(e,t,n){this.loadConfig=function(i){var o=t.defer();return e({method:"GET",url:i}).then(function(e){for(var t=e.data,i=0,a=t.sources.length;i<a;i++)t.sources[i].src=n.trustAsResourceUrl(t.sources[i].src);o.resolve(t)},function(){o.reject()}),o.promise}}]),angular.module("com.2fdevs.videogular").service("vgFullscreen",["VG_UTILS",function(e){function t(){var e=!1;return e=n?null!=document[i.element]||n.webkitDisplayingFullscreen:null!=document[i.element]}var n,i=null,o={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror"},newWebkit:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},oldWebkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror"},ios:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",onchange:"MSFullscreenChange",onerror:"MSFullscreenError"}};for(var a in o)if(o[a].enabled in document){i=o[a];break}e.isiOSDevice()&&(i=o.ios),this.isAvailable=null!=i,i&&(this.onchange=i.onchange,this.onerror=i.onerror,this.isFullScreen=t,this.exit=function(){document[i.exit]()},this.request=function(e){n=e,n[i.request]()})}]),angular.module("com.2fdevs.videogular").service("VG_UTILS",["$window",function(e){this.fixEventOffset=function(e){var t=navigator.userAgent.match(/Firefox\/(\d+)/i);if(t&&Number.parseInt(t.pop())<39){var n=e.currentTarget.currentStyle||window.getComputedStyle(e.target,null),i=parseInt(n.borderLeftWidth,10),o=parseInt(n.borderTopWidth,10),a=e.currentTarget.getBoundingClientRect(),r=e.clientX-i-a.left,u=e.clientY-o-a.top;e.offsetX=r,e.offsetY=u}return e},this.getZIndex=function(){for(var e,t=1,n=document.getElementsByTagName("*"),i=0,o=n.length;i<o;i++)e=parseInt(window.getComputedStyle(n[i])["z-index"]),e>t&&(t=e+1);return t},this.isMobileDevice=function(){return"undefined"!=typeof window.orientation||navigator.userAgent.indexOf("IEMobile")!==-1},this.isiOSDevice=function(){return navigator.userAgent.match(/ip(hone|ad|od)/i)&&!navigator.userAgent.match(/(iemobile)[\/\s]?([\w\.]*)/i)},this.isCordova=function(){return document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1},this.supportsLocalStorage=function(){var t="videogular-test-key";try{var n=e.sessionStorage;return n.setItem(t,"1"),n.removeItem(t),"localStorage"in e&&null!==e.localStorage}catch(e){return!1}}}]),angular.module("com.2fdevs.videogular.plugins.controls",[]).run(["$templateCache",function(e){e.put("vg-templates/vg-controls",'<div class="controls-container" ng-mousemove="onMouseMove()" ng-class="animationClass" ng-transclude></div>')}]).directive("vgControls",["$timeout","VG_STATES",function(e,t){return{restrict:"E",require:"^videogular",transclude:!0,templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-controls"},scope:{vgAutohide:"=?",vgAutohideTime:"=?"},link:function(n,i,o,a){var r,u=2e3;n.API=a,n.onMouseMove=function(){n.vgAutohide&&n.showControls()},n.setAutohide=function(i){i&&a.currentState==t.PLAY?r=e(n.hideControls,u):(n.animationClass="",e.cancel(r),n.showControls())},n.setAutohideTime=function(e){u=e},n.hideControls=function(){n.animationClass="hide-animation"},n.showControls=function(){n.animationClass="show-animation",e.cancel(r),n.vgAutohide&&a.currentState==t.PLAY&&(r=e(n.hideControls,u))},a.isConfig?n.$watch("API.config",function(){if(n.API.config){var e=n.API.config.plugins.controls.autohide||!1,t=n.API.config.plugins.controls.autohideTime||2e3;n.vgAutohide=e,n.vgAutohideTime=t,n.setAutohideTime(t),n.setAutohide(e)}}):(void 0!=n.vgAutohide&&n.$watch("vgAutohide",n.setAutohide),void 0!=n.vgAutohideTime&&n.$watch("vgAutohideTime",n.setAutohideTime)),n.$watch(function(){return a.currentState},function(e,t){n.vgAutohide&&n.showControls()})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-fullscreen-button",'<button class="iconButton" ng-click="onClickFullScreen()" ng-class="fullscreenIcon" aria-label="Toggle full screen" type="button"> </button>')}]).directive("vgFullscreenButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-fullscreen-button"},link:function(e,t,n,i){e.onChangeFullScreen=function(t){e.fullscreenIcon={enter:!t,exit:t}},e.onClickFullScreen=function(){i.toggleFullScreen()},e.fullscreenIcon={enter:!0},e.$watch(function(){return i.isFullScreen},function(t,n){t!=n&&e.onChangeFullScreen(t)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-play-pause-button",'<button class="iconButton" ng-click="onClickPlayPause()" ng-class="playPauseIcon" aria-label="Play/Pause" type="button"></button>')}]).directive("vgPlayPauseButton",["VG_STATES",function(e){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-play-pause-button"},link:function(t,n,i,o){t.setState=function(n){switch(n){case e.PLAY:t.playPauseIcon={pause:!0};break;case e.PAUSE:t.playPauseIcon={play:!0};break;case e.STOP:t.playPauseIcon={play:!0}}},t.onClickPlayPause=function(){o.playPause()},t.playPauseIcon={play:!0},t.$watch(function(){return o.currentState},function(e,n){t.setState(e)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-playback-button",'<button class="playbackValue iconButton" ng-click="onClickPlayback()">{{playback}}x</button>')}]).directive("vgPlaybackButton",[function(){return{restrict:"E",require:"^videogular",templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-playback-button"},scope:{vgSpeeds:"=?"},link:function(e,t,n,i){e.playback="1",e.setPlayback=function(t){e.playback=t,i.setPlayback(parseFloat(t))},e.onClickPlayback=function(){var t=e.vgSpeeds||["0.5","1","1.5","2"],n=t.indexOf(e.playback.toString())+1;n>=t.length?e.playback=t[0]:e.playback=t[n],e.setPlayback(e.playback)},e.$watch(function(){return i.playback},function(t,n){t!=n&&e.setPlayback(t)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgScrubBarBuffer",[function(){return{restrict:"E",require:"^videogular",link:function(e,t,n,i){var o=0;e.onUpdateBuffer=function(e){"number"==typeof e&&i.totalTime?(o=100*(e/i.totalTime),t.css("width",o+"%")):t.css("width",0)},e.$watch(function(){return i.bufferEnd},function(t,n){e.onUpdateBuffer(t)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-scrub-bar-cue-points",'<div class="cue-point-timeline"><div ng-repeat="cuePoint in vgCuePoints" class="cue-point" ng-style="cuePoint.$$style"></div></div>')}]).directive("vgScrubBarCuePoints",[function(){return{restrict:"E",require:"^videogular",templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-scrub-bar-cue-points"},scope:{vgCuePoints:"="},link:function(e,t,n,i){e.onPlayerReady=function(){e.updateCuePoints(e.vgCuePoints)},e.updateCuePoints=function(e){var n;if(e){n=parseInt(t[0].clientWidth);for(var o=0,a=e.length;o<a;o++){var r=e[o].timeLapse.end>=0?e[o].timeLapse.end:e[o].timeLapse.start+1,u=1e3*(r-e[o].timeLapse.start),s=100*e[o].timeLapse.start/Math.round(i.totalTime/1e3)+"%",l=0;"number"==typeof u&&i.totalTime&&(l=100*u/i.totalTime+"%"),e[o].$$style={width:l,left:s}}}},e.$watch("vgCuePoints",e.updateCuePoints),e.$watch(function(){return i.totalTime},function(t,n){t>0&&e.onPlayerReady()})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgScrubBarCurrentTime",[function(){return{restrict:"E",require:"^videogular",link:function(e,t,n,i){var o=0;e.onUpdateTime=function(e){"number"==typeof e&&i.totalTime?(o=100*(e/i.totalTime),t.css("width",o+"%")):t.css("width",0)},e.$watch(function(){return i.currentTime},function(t,n){e.onUpdateTime(t)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-scrub-bar-thumbnails",'<div class="vg-thumbnails" ng-show="thumbnails" ng-style="thumbnailContainer"><div class="image-thumbnail" ng-style="thumbnails"></div></div><div class="background"></div>')}]).directive("vgScrubBarThumbnails",["VG_UTILS",function(e){return{restrict:"E",require:"^videogular",templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-scrub-bar-thumbnails"},scope:{vgThumbnails:"="},link:function(t,n,i,o){var a=0,r=0,u=n[0].querySelector(".background"),s="string"==typeof t.vgThumbnails;t.thumbnails=!1,t.thumbnailContainer={},t.getOffset=function(e){for(var t=e.target,n=0;t&&!isNaN(t.offsetLeft);)n+=t.offsetLeft-t.scrollLeft,t=t.offsetParent;return e.clientX-n},t.onLoadThumbnails=function(e){a=e.currentTarget.naturalWidth,r=a/100},t.onLoadThumbnail=function(e){r=e.currentTarget.naturalWidth},t.updateThumbnails=function(e){var n=Math.round(100*e/(o.totalTime/1e3)),i=u.scrollWidth*n/100-r/2;if(s){var l=Math.round(a*n/100);t.thumbnailContainer={width:r+"px",left:i+"px"},t.thumbnails={"background-image":'url("'+t.vgThumbnails+'")',"background-position":-l+"px 0px"}}else{var c=o.totalTime/u.scrollWidth/1e3,d={start:Math.floor(e-c/2),end:Math.ceil(e)};if(d.start<0&&(d.start=0),d.end>o.totalTime&&(d.end=o.totalTime),t.thumbnailContainer={left:i+"px"},t.thumbnails={"background-image":"none"},t.vgThumbnails)for(var m=0,h=t.vgThumbnails.length;m<h;m++){var v=t.vgThumbnails[m];if(v.timeLapse.end>=0){if(d.start>=v.timeLapse.start&&(d.end<=v.timeLapse.end||d.end<=v.timeLapse.start)){t.thumbnails={"background-image":'url("'+v.params.thumbnail+'")'};break}}else if(v.timeLapse.start>=d.start&&v.timeLapse.start<=d.end){t.thumbnails={"background-image":'url("'+v.params.thumbnail+'")'};break}}}},t.onMouseMove=function(e){var n=Math.round(e.offsetX*o.mediaElement[0].duration/u.scrollWidth);t.updateThumbnails(n),t.$digest()},t.onTouchMove=function(e){var n=e.touches,i=t.getOffset(n[0]),a=Math.round(i*o.mediaElement[0].duration/u.scrollWidth);t.updateThumbnails(a),t.$digest()},t.onMouseLeave=function(e){t.thumbnails=!1,t.$digest()},t.onTouchLeave=function(e){t.thumbnails=!1,t.$digest()},t.onDestroy=function(){n.unbind("touchmove",t.onTouchMove),n.unbind("touchleave",t.onTouchLeave),n.unbind("touchend",t.onTouchLeave),n.unbind("mousemove",t.onMouseMove),n.unbind("mouseleave",t.onMouseLeave)};var l;s?(l=new Image,l.onload=t.onLoadThumbnails.bind(t),l.src=t.vgThumbnails):(l=new Image,l.onload=t.onLoadThumbnail.bind(t),l.src=t.vgThumbnails[0].params.thumbnail),e.isMobileDevice()?(n.bind("touchmove",t.onTouchMove),n.bind("touchleave",t.onTouchLeave),n.bind("touchend",t.onTouchLeave)):(n.bind("mousemove",t.onMouseMove),n.bind("mouseleave",t.onMouseLeave)),t.$on("destroy",t.onDestroy.bind(t))}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-scrub-bar",'<div role="slider" aria-valuemax="{{ariaTime(API.totalTime)}}" aria-valuenow="{{ariaTime(API.currentTime)}}" aria-valuemin="0" aria-label="Time scrub bar" tabindex="0" ng-keydown="onScrubBarKeyDown($event)"></div><div class="container" ng-transclude></div>')}]).directive("vgScrubBar",["VG_STATES","VG_UTILS",function(e,t){return{restrict:"E",require:"^videogular",transclude:!0,templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-scrub-bar"},scope:{vgThumbnails:"="},link:function(n,i,o,a){var r=!1,u=!1,s=!1,l=37,c=39,d=5,m=0,h=0,v=i[0].querySelector("div[role=slider]");if(n.thumbnails=!1,n.thumbnailContainer={},n.API=a,n.onLoadThumbnails=function(e){m=e.path[0].naturalWidth,h=m/100},n.ariaTime=function(e){return Math.round(e/1e3)},n.getOffset=function(e){for(var t=e.target,n=0;t&&!isNaN(t.offsetLeft);)n+=t.offsetLeft-t.scrollLeft,t=t.offsetParent;return e.clientX-n},n.onScrubBarTouchStart=function(e){var t=e.originalEvent||e,i=t.touches,o=n.getOffset(i[0]);r=!0,u&&(s=!0),a.pause(),a.seekTime(o*a.mediaElement[0].duration/v.scrollWidth),n.$digest()},n.onScrubBarTouchEnd=function(e){e.originalEvent||e;s&&(s=!1,a.play()),r=!1,n.$digest()},n.onScrubBarTouchMove=function(e){var t=e.originalEvent||e,i=t.touches,o=n.getOffset(i[0]);if(n.vgThumbnails&&n.vgThumbnails.length){var u=Math.round(o*a.mediaElement[0].duration/v.scrollWidth),s=Math.round(100*u/(a.totalTime/1e3));n.updateThumbnails(s)}r&&a.seekTime(o*a.mediaElement[0].duration/v.scrollWidth),n.$digest()},n.onScrubBarTouchLeave=function(e){r=!1,n.thumbnails=!1,n.$digest()},n.onScrubBarMouseDown=function(e){e=t.fixEventOffset(e),r=!0,u&&(s=!0),a.pause(),a.seekTime(e.offsetX*a.mediaElement[0].duration/v.scrollWidth),n.$digest()},n.onScrubBarMouseUp=function(e){s&&(s=!1,a.play()),r=!1,n.$digest()},n.onScrubBarMouseMove=function(e){if(n.vgThumbnails&&n.vgThumbnails.length){var i=Math.round(e.offsetX*a.mediaElement[0].duration/v.scrollWidth),o=Math.round(100*i/(a.totalTime/1e3));n.updateThumbnails(o)}r&&(e=t.fixEventOffset(e),a.seekTime(e.offsetX*a.mediaElement[0].duration/v.scrollWidth)),n.$digest()},n.onScrubBarMouseLeave=function(e){r=!1,n.thumbnails=!1,n.$digest()},n.onScrubBarKeyDown=function(e){var t=a.currentTime/a.totalTime*100;e.which===l||e.keyCode===l?(a.seekTime(t-d,!0),e.preventDefault()):e.which!==c&&e.keyCode!==c||(a.seekTime(t+d,!0),e.preventDefault())},n.updateThumbnails=function(e){var t=Math.round(m*e/100),i=v.scrollWidth*e/100-h/2;n.thumbnailContainer={width:h+"px",left:i+"px"},n.thumbnails={"background-image":'url("'+n.vgThumbnails+'")',"background-position":-t+"px 0px"}},n.setState=function(t){if(!r)switch(t){case e.PLAY:u=!0;break;case e.PAUSE:u=!1;break;case e.STOP:u=!1}},n.onDestroy=function(){i.unbind("touchstart",n.onScrubBarTouchStart),i.unbind("touchend",n.onScrubBarTouchEnd),i.unbind("touchmove",n.onScrubBarTouchMove),i.unbind("touchleave",n.onScrubBarTouchLeave),i.unbind("mousedown",n.onScrubBarMouseDown),i.unbind("mouseup",n.onScrubBarMouseUp),i.unbind("mousemove",n.onScrubBarMouseMove),
i.unbind("mouseleave",n.onScrubBarMouseLeave)},n.$watch(function(){return a.currentState},function(e,t){e!=t&&n.setState(e)}),n.vgThumbnails){var g=new Image;g.onload=n.onLoadThumbnails.bind(n),g.src=n.vgThumbnails}t.isMobileDevice()?(i.bind("touchstart",n.onScrubBarTouchStart),i.bind("touchend",n.onScrubBarTouchEnd),i.bind("touchmove",n.onScrubBarTouchMove),i.bind("touchleave",n.onScrubBarTouchLeave)):(i.bind("mousedown",n.onScrubBarMouseDown),i.bind("mouseup",n.onScrubBarMouseUp),i.bind("mousemove",n.onScrubBarMouseMove),i.bind("mouseleave",n.onScrubBarMouseLeave)),n.$on("destroy",n.onDestroy.bind(n))}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgTimeDisplay",[function(){return{require:"^videogular",restrict:"E",link:function(e,t,n,i){e.currentTime=i.currentTime,e.timeLeft=i.timeLeft,e.totalTime=i.totalTime,e.isLive=i.isLive,e.$watch(function(){return i.currentTime},function(t,n){e.currentTime=t}),e.$watch(function(){return i.timeLeft},function(t,n){e.timeLeft=t}),e.$watch(function(){return i.totalTime},function(t,n){e.totalTime=t}),e.$watch(function(){return i.isLive},function(t,n){e.isLive=t})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-mute-button",'<button type="button" class="iconButton" ng-class="muteIcon" ng-click="onClickMute()" ng-focus="onMuteButtonFocus()" ng-blur="onMuteButtonLoseFocus()" ng-mouseleave="onMuteButtonLeave()" ng-keydown="onMuteButtonKeyDown($event)" aria-label="Mute"></button>')}]).directive("vgMuteButton",[function(){return{restrict:"E",require:"^videogular",templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-mute-button"},link:function(e,t,n,i){var o=!1,a=38,r=40,u=.05;e.onClickMute=function(){o?e.currentVolume=e.defaultVolume:(e.currentVolume=0,e.muteIcon={mute:!0}),o=!o,i.setVolume(e.currentVolume)},e.onMuteButtonFocus=function(){e.volumeVisibility="visible"},e.onMuteButtonLoseFocus=function(){e.volumeVisibility="hidden"},e.onMuteButtonLeave=function(){document.activeElement.blur()},e.onMuteButtonKeyDown=function(e){var t,n=null!=i.volume?i.volume:1;e.which===a||e.keyCode===a?(t=n+u,t>1&&(t=1),i.setVolume(t),e.preventDefault()):e.which!==r&&e.keyCode!==r||(t=n-u,t<0&&(t=0),i.setVolume(t),e.preventDefault())},e.onSetVolume=function(t){e.currentVolume=t,o=0===e.currentVolume,o?t>0&&(e.defaultVolume=t):e.defaultVolume=t;var n=Math.round(100*t);0==n?e.muteIcon={mute:!0}:n>0&&n<25?e.muteIcon={level0:!0}:n>=25&&n<50?e.muteIcon={level1:!0}:n>=50&&n<75?e.muteIcon={level2:!0}:n>=75&&(e.muteIcon={level3:!0})},e.defaultVolume=1,e.currentVolume=e.defaultVolume,e.muteIcon={level3:!0},e.onSetVolume(i.volume),e.$watch(function(){return i.volume},function(t,n){t!=n&&e.onSetVolume(t)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function(e){e.put("vg-templates/vg-volume-bar",'<div class="verticalVolumeBar">              <div class="volumeBackground" ng-click="onClickVolume($event)" ng-mousedown="onMouseDownVolume()" ng-mouseup="onMouseUpVolume()" ng-mousemove="onMouseMoveVolume($event)" ng-mouseleave="onMouseLeaveVolume()">                <div class="volumeValue"></div>                <div class="volumeClickArea"></div>              </div>            </div>')}]).directive("vgVolumeBar",["VG_UTILS",function(e){return{restrict:"E",require:"^videogular",templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-volume-bar"},link:function(t,n,i,o){var a=!1,r=angular.element(n[0].getElementsByClassName("volumeBackground")),u=angular.element(n[0].getElementsByClassName("volumeValue"));t.onClickVolume=function(t){t=e.fixEventOffset(t);var n=parseInt(r.prop("offsetHeight")),i=100*t.offsetY/n,a=1-i/100;o.setVolume(a)},t.onMouseDownVolume=function(){a=!0},t.onMouseUpVolume=function(){a=!1},t.onMouseLeaveVolume=function(){a=!1},t.onMouseMoveVolume=function(t){if(a){t=e.fixEventOffset(t);var n=parseInt(r.prop("offsetHeight")),i=100*t.offsetY/n,u=1-i/100;o.setVolume(u)}},t.updateVolumeView=function(e){e*=100,u.css("height",e+"%"),u.css("top",100-e+"%")},t.onChangeVisibility=function(e){n.css("visibility",e)},n.css("visibility",t.volumeVisibility),t.$watch("volumeVisibility",t.onChangeVisibility),t.updateVolumeView(o.volume),t.$watch(function(){return o.volume},function(e,n){e!=n&&t.updateVolumeView(e)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgVolume",["VG_UTILS",function(e){return{restrict:"E",link:function(t,n,i){t.onMouseOverVolume=function(){t.$evalAsync(function(){t.volumeVisibility="visible"})},t.onMouseLeaveVolume=function(){t.$evalAsync(function(){t.volumeVisibility="hidden"})},t.onDestroy=function(){n.unbind("mouseover",t.onScrubBarTouchStart),n.unbind("mouseleave",t.onScrubBarTouchEnd)},e.isMobileDevice()?n.css("display","none"):(t.volumeVisibility="hidden",n.bind("mouseover",t.onMouseOverVolume),n.bind("mouseleave",t.onMouseLeaveVolume)),t.$on("destroy",t.onDestroy.bind(t))}}}]),angular.module("com.2fdevs.videogular.plugins.overlayplay",[]).run(["$templateCache",function(e){e.put("vg-templates/vg-overlay-play",'<div class="overlayPlayContainer" ng-click="onClickOverlayPlay()">                  <div class="iconButton" ng-class="overlayPlayIcon"></div>                </div>')}]).directive("vgOverlayPlay",["VG_STATES",function(e){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(e,t){return t.vgTemplate||"vg-templates/vg-overlay-play"},link:function(t,n,i,o){t.onChangeState=function(n){switch(n){case e.PLAY:t.overlayPlayIcon={};break;case e.PAUSE:t.overlayPlayIcon={play:!0};break;case e.STOP:t.overlayPlayIcon={play:!0}}},t.onClickOverlayPlay=function(e){o.playPause()},t.overlayPlayIcon={play:!0},t.$watch(function(){return o.currentState},function(e,n){t.onChangeState(e)})}}}]);